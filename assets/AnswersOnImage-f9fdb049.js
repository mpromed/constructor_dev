import{_ as Y,r as y,q as j,H as z,a as m,o as i,c as r,b as a,w as h,f as R,v as f,g as l,F as k,e as C,I as $,J,x as A,d as M,K,L as Q}from"./index-6017cff3.js";import G from"./ContentImages-45a42268.js";import W from"./ColorItem-5ba2b7f6.js";import Z from"./ActionItem-8ea74162.js";/* empty css                                                          */const L=v=>(K("data-v-91b2a851"),v=v(),Q(),v),ee={key:0},te=["src"],ne=["onMousedown"],oe={class:"marker-index"},se={key:1,class:"markers-table"},ae={key:2,class:"marker-info"},le={class:"slider-text"},ie={class:"checkboxes"},ce=L(()=>l("div",{class:"checkbox-text"},"Правильный ?",-1)),me={class:"checkboxes"},re=L(()=>l("div",{class:"checkbox-text"},"Не обязательный ?",-1)),de=L(()=>l("div",{class:"slider-text"},"Размер маркера ",-1)),ue=L(()=>l("div",{class:"slider-text"},"Размер хитбокса ",-1)),pe={class:"action_edit"},O=2,ge=50,U=2,_e=50,we={__name:"AnswersOnImage",props:["componentData"],setup(v){const e=v,s=y(null),B=y(null),u=y(null),p=y({width:0,height:0});e.componentData.answersButtonType="buttonsOnImage";const S=(n,t)=>n/t*100,D=(n,t)=>n/100*t,T=n=>({position:"absolute",top:`${n.y}%`,left:`${n.x}%`,transform:"translate(-50%, -50%)",width:`${D(n.size,p.value.width)}px`,height:`${D(n.size,p.value.width)}px`,background:`${n.color}`}),E=n=>({position:"absolute",top:`${n.y}%`,left:`${n.x}%`,transform:"translate(-50%, -50%)",width:`${D(n.hitboxSize,p.value.width)}px`,height:`${D(n.hitboxSize,p.value.width)}px`,backgroundColor:`${n.color}55`,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box",cursor:"pointer"}),q=()=>{s.value!==null&&(e.componentData.answersList.splice(s.value,1),s.value=e.componentData.answersList.length-1)},H=n=>{if(n.target.classList.contains("content-image")){const t=u.value.getBoundingClientRect(),d=(n.clientX-t.left)/t.width*100,c=(n.clientY-t.top)/t.height*100;e.componentData.answersList.push({index:e.componentData.answersList.length+1,isRight:!1,notRequired:!1,answerText:"",action:{doAction:!1,clickAction:!1,name:"moveToStep",internalId:0,checkQuestion:!1,trackRepeatAnswer:!1},style:{x:d,y:c,size:S(O,t.width),hitboxSize:S(U,t.width)}}),s.value=e.componentData.answersList.length-1}},N=(n,t)=>{n.preventDefault(),s.value=t;const d=g=>{const _=u.value.getBoundingClientRect();let x=(g.clientX-_.left)/_.width*100,w=(g.clientY-_.top)/_.height*100;x=Math.max(0,Math.min(x,100)),w=Math.max(0,Math.min(w,100)),e.componentData.answersList[s.value].style.x=x,e.componentData.answersList[s.value].style.y=w},c=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",c)},V=()=>{z(()=>{if(u.value&&u.value.complete){const{width:n,height:t}=u.value.getBoundingClientRect();p.value.width=n,p.value.height=t}else console.log("Изображение еще не загружено или элемент не найден")})};j(async()=>{await z(),V()});const F=n=>{let t=n.index-1;s.value=t};return(n,t)=>{const d=m("el-switch"),c=m("el-form-item"),g=m("el-table-column"),_=m("el-table"),x=m("el-input"),w=m("el-checkbox"),I=m("el-slider"),P=m("el-button");return i(),r(k,null,[a(c,{label:"Ответы на картинке?"},{default:h(()=>[a(d,{modelValue:e.componentData.isAnswersOnImage,"onUpdate:modelValue":t[0]||(t[0]=o=>e.componentData.isAnswersOnImage=o),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1}),e.componentData.isAnswersOnImage?(i(),r("div",ee,[a(c,{label:"Множественный выбор:"},{default:h(()=>[a(d,{modelValue:e.componentData.multiple,"onUpdate:modelValue":t[1]||(t[1]=o=>e.componentData.multiple=o)},null,8,["modelValue"])]),_:1}),e.componentData.isAnswersOnImage?(i(),R(c,{key:0,label:"Картинка:"},{default:h(()=>[e.componentData.imagesData&&e.componentData.isAnswersOnImage?(i(),R(G,{key:0,componentData:e.componentData.imagesData,isSingleImage:e.componentData.isAnswersOnImage},null,8,["componentData","isSingleImage"])):f("",!0),l("div",{class:"image-container",onClick:t[2]||(t[2]=o=>H(o)),ref_key:"imageContainer",ref:B,onLoad:V},[l("img",{class:"content-image",src:e.componentData.imagesData.imagesList[0].imageURL,ref_key:"imageElement",ref:u,onLoad:V},null,40,te),(i(!0),r(k,null,C(e.componentData.answersList,(o,b)=>(i(),r("div",{class:"marker",key:b,style:$(T(o.style)),onMousedown:J(X=>N(X,b),["prevent"])},[l("div",oe,A(o.index),1)],44,ne))),128)),(i(!0),r(k,null,C(e.componentData.answersList,(o,b)=>(i(),r("div",{class:"hitbox",key:b,style:$(E(o.style))},null,4))),128))],544),e.componentData.answersList.length>0?(i(),r("div",se,[a(_,{data:e.componentData.answersList,style:{width:"100%"},border:"","highlight-current-row":"",onRowClick:F},{default:h(()=>[a(g,{prop:"index",label:"id",width:"40"}),a(g,{prop:"answerText",label:"Текст ответа",width:"382"}),a(g,{prop:"isRight",label:"Значение",width:"160"},{default:h(({row:o})=>[l("span",null,A(o.isRight?"Правильный":"Неправильный"),1)]),_:1})]),_:1},8,["data"])])):f("",!0),s.value!==null&&e.componentData.answersList.length>0?(i(),r("div",ae,[l("div",le,[M("Текст ответа"),a(x,{modelValue:e.componentData.answersList[s.value].answerText,"onUpdate:modelValue":t[3]||(t[3]=o=>e.componentData.answersList[s.value].answerText=o)},null,8,["modelValue"])]),l("div",ie,[ce,a(w,{modelValue:e.componentData.answersList[s.value].isRight,"onUpdate:modelValue":t[4]||(t[4]=o=>e.componentData.answersList[s.value].isRight=o),size:"large"},null,8,["modelValue"])]),l("div",me,[re,a(w,{modelValue:e.componentData.answersList[s.value].notRequired,"onUpdate:modelValue":t[5]||(t[5]=o=>e.componentData.answersList[s.value].notRequired=o),size:"large"},null,8,["modelValue"])]),de,a(I,{modelValue:e.componentData.answersList[s.value].style.size,"onUpdate:modelValue":t[6]||(t[6]=o=>e.componentData.answersList[s.value].style.size=o),min:O,max:ge,step:.1},null,8,["modelValue"]),ue,a(I,{modelValue:e.componentData.answersList[s.value].style.hitboxSize,"onUpdate:modelValue":t[7]||(t[7]=o=>e.componentData.answersList[s.value].style.hitboxSize=o),min:U,max:_e,step:.1},null,8,["modelValue"]),a(P,{onClick:q},{default:h(()=>[M("Удалить маркер")]),_:1}),a(W,{modelValue:e.componentData.answersList[s.value].style.color,"onUpdate:modelValue":t[8]||(t[8]=o=>e.componentData.answersList[s.value].style.color=o)},null,8,["modelValue"]),l("div",pe,[a(Z,{action:e.componentData.answersList[s.value].action},null,8,["action"])])])):f("",!0)]),_:1})):f("",!0)])):f("",!0)],64)}}},be=Y(we,[["__scopeId","data-v-91b2a851"]]);export{be as default};
