import{Q,r as g,q as R,a as n,o as c,c as f,b as t,w as a,f as b,v as u,F as A,e as L,d as I,x as S,R as $}from"./index-930bab4a.js";const D={key:1},F={key:2},_={__name:"ActionItem",props:["action"],setup(o){const x=o,U=Q().params.testId,s=g(!1),m=g([]),T=[{value:"previous",label:"Назад"},{value:"next",label:"Далее"},{value:"moveToStep",label:"Переход к блоку"},{value:"closeModalWarning",label:"Закрыть модальное окно"},{value:"startAgain",label:"Начать заново"},{value:"closeSession",label:"Закрыть сессию"},{value:"doAnswerAction",label:"Переход по ответу"},{value:"moveToScenario",label:"Переход к сценарию"}],V=async()=>{const v=await $.getBlocks(U);m.value=v.data.data.map(e=>({seqNo:e.seq_no,internalId:e.internal_id,name:e.body.name})),m.value.sort((e,d)=>e.seqNo-d.seqNo)},N=async()=>{s.value=!0,await V()},h=(v,e)=>{x.action.internalId=e.internalId,s.value=!1};return R(()=>{V()}),(v,e)=>{var y;const d=n("el-checkbox"),i=n("el-form-item"),p=n("el-option"),q=n("el-select"),k=n("el-switch"),B=n("el-col"),w=n("el-button"),r=n("el-table-column"),C=n("el-table"),W=n("el-dialog"),z=n("el-input");return c(),f(A,null,[t(B,{span:8,offset:1},{default:a(()=>[o.action.doAction!=null?(c(),b(i,{key:0,label:"Выполнять действие на кнопке навигации"},{default:a(()=>[t(d,{modelValue:o.action.doAction,"onUpdate:modelValue":e[0]||(e[0]=l=>o.action.doAction=l),size:"large"},null,8,["modelValue"])]),_:1})):u("",!0),o.action.clickAction!=null?(c(),b(i,{key:1,label:"Выполнять при нажатии на ответ"},{default:a(()=>[t(d,{modelValue:o.action.clickAction,"onUpdate:modelValue":e[1]||(e[1]=l=>o.action.clickAction=l),size:"large"},null,8,["modelValue"])]),_:1})):u("",!0),t(i,{label:"Действие:"},{default:a(()=>[t(q,{class:"m-2",modelValue:o.action.name,"onUpdate:modelValue":e[2]||(e[2]=l=>o.action.name=l),placeholder:"Select"},{default:a(()=>[(c(),f(A,null,L(T,l=>t(p,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(i,{label:"Проверка вопроса:"},{default:a(()=>[t(k,{modelValue:o.action.checkQuestion,"onUpdate:modelValue":e[3]||(e[3]=l=>o.action.checkQuestion=l),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1}),o.action.checkQuestion===!0?(c(),b(i,{key:0,label:"Вып. действие при неверном ответе:"},{default:a(()=>[t(k,{modelValue:o.action.actionWithWrongAnswer,"onUpdate:modelValue":e[4]||(e[4]=l=>o.action.actionWithWrongAnswer=l),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})):u("",!0),t(i,{label:"Закрыть сессию:"},{default:a(()=>[t(k,{modelValue:o.action.closeSessionPick,"onUpdate:modelValue":e[5]||(e[5]=l=>o.action.closeSessionPick=l),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1}),t(i,{label:"Отслеживать повторный переход/ответ ?"},{default:a(()=>[t(d,{modelValue:o.action.trackRepeatAnswer,"onUpdate:modelValue":e[6]||(e[6]=l=>o.action.trackRepeatAnswer=l),size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o.action.name==="moveToStep"?(c(),b(w,{key:0,class:"button-choose-block",onClick:e[7]||(e[7]=l=>N())},{default:a(()=>[I("Выбрать блок")]),_:1})):u("",!0),t(W,{modelValue:s.value,"onUpdate:modelValue":e[8]||(e[8]=l=>s.value=l),title:"Выберите блок"},{default:a(()=>[t(C,{data:m.value},{default:a(()=>[t(r,{property:"seqNo",label:"Порядковый номер",width:"110"}),t(r,{property:"internalId",label:"Внутренний id",width:"120"}),t(r,{property:"name",label:"Наименование блока",width:"300"}),t(r,{property:"name",label:"Выбор",width:"100"},{default:a(l=>[t(w,{size:"small",onClick:P=>h(l.$index,l.row)},{default:a(()=>[I("Выбрать")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),o.action.name==="moveToStep"?(c(),f("div",D,"Вн. id: "+S(o.action.internalId)+" Блок: "+S((y=m.value.find(l=>l.internalId===o.action.internalId))==null?void 0:y.name),1)):u("",!0),o.action.name==="moveToScenario"?(c(),f("div",F,[t(i,{label:"Сценарий id:"},{default:a(()=>[t(z,{modelValue:o.action.toScenarioId,"onUpdate:modelValue":e[9]||(e[9]=l=>o.action.toScenarioId=l)},null,8,["modelValue"])]),_:1})])):u("",!0)],64)}}};export{_ as default};
